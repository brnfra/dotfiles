#!/usr/bin/env bash
#  Arquivo: push_config
#  Autor: Bruno Franco
#  Ultima_modificacao: 05-11-2023
#  Download: git@github.com:brnfra
#  Licence:Este arquivo é de domínio público
#  Garantia: O autor não se responsabiliza por eventuais danos
#            causados pelo uso deste arquivo.
# shellcheck source=~/bin/dotfiles_env
. dotfiles_env

if [[ "$1" == "-h" || "$1" == "--help" ]]; then cat <<HELP
${0##*/}

NAME
    ${0##*/}  - Push config files from local to remote repo.

SYNOPSIS
    ${0##*/} [-h] --help

DESCRIPTION
    A simple script to push from local config files to remote repo config files.

    -h, --help
	Print help informations

See the README for documentation.
https://github.com/brnfra/dotfiles
Licensed under the MIT license.
HELP
exit; fi


backto=$(pwd)

git_push() {
    printf "Push config files from local to remote repo.\n"
    cd "$dotfiles_dir" || return
    #push
    message="${1:-"refactor: update dotfiles dir or scripts"}"
    git add -A -v;git commit -v -m "$message";
    if git push -u origin "$branch"; then
	git push
	git status -sb
	cmOk "Git add and push"
    else
	git status -sb
	clnError "$?:error check git logs to find out."
    fi
}
#test, pull from remote repo to local and copy changes
clnInfo "push_config"
if stage_config ; then
    git_push "$1"
fi
cd "$backto" || return
