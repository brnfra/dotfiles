#!/usr/bin/env bash
#  Arquivo: push_config
#  Autor: Bruno Franco
#  Ultima_modificacao: 15-03-2023
#  Download: git@github.com:brnfra
#  Licence:Este arquivo é de domínio público
#  Garantia: O autor não se responsabiliza por eventuais danos
#            causados pelo uso deste arquivo.
# shellcheck source=~/bin/dotfiles_env
. dotfiles_env

backto=$(pwd)
# git_push {{{
git_push() {
    #test and copy
    stage_config
    #push
    message="${1:-"refactor: update dotfiles dir or scripts"}"
    git add -A -v;git commit -v -m "$message";git push origin $branch
    if [ $? ];then
	git status -sb
	cmOk "Git add and push"
    else
	git status -sb
	clnError "A error occours. Check log."
    fi
}
# }}}
if [ -d "$dotfiles_dir" ];then
    cd "$dotfiles_dir" || return
    git_push "$1"
else
    cError "No"
    clnItalic "$dotfiles_dir" "found."
    exit 1
fi
cd "$backto" || return
