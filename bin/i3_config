#!/usr/bin/env bash
# Arquivo: i3_config
# Autor: Bruno Franco
# Download: git@github.com:brnfra
# Licence:Este arquivo é de domínio público
# Garantia: O autor não se responsabiliza por eventuais danos
#           causados pelo uso deste arquivo.
#Generated by script to manage in multiple computer
#https://unixsheikh.com/tutorials/how-you-can-manage-the-i3-window-manager-on-multiple-computers.html
# shellcheck source=dotfiles_env
. dotfiles_env

cInfo "Script: " "${0##*/}"
################################################################################################
## definitions                                                                                ##{{{
################################################################################################

#mod Mod1(Alt) or Mod4(Win)
mod_button="Mod4"
# Initializing the variable. 0 = true

# Settings.
#gaps
use_gaps="true"
gaps_inner=2
gaps_outer=2
#Paths i3blocks
binaries="\$HOME/bin"
i3_cfg_dir="\$HOME/.config/i3"
status_command="i3blocks -c ${i3_cfg_dir}/i3blocks.conf"
status_command2="i3blocks -c ${i3_cfg_dir}/i3blocks_v.conf"
#terminal
term="konsole"
#Apps
if which $term &> /dev/null;then
    Terminal="$term"
else
    Terminal="i3-sensible-terminal"
fi

case $osys in

    "debian" | "ubuntu")
    browser="firefox-esr"
    fileManager="pcmanfm"
    ;;

    "manjaro")
    browser="firefox"
    fileManager="pcmanfm"
    ;;

    $opensuse)
    browser="firefox"
    fileManager="dolphin"
    ;;

esac

# Get OS and hostname.
if [ "$osys" = "debian" ] || [ "$osys" = "ubuntu" ]; then
    use_gaps="false"
fi
#enviroment
if [ -e "$i3_dir" ] && [ -d "$i3_dir" ]; then
    #backup 
    cp -r "$i3_dir" "$bkpdir" &> $HOME/.cache/i3_script.log
else
    mkdir -pv "$i3_dir" &>> $HOME/.cache/i3_script.log
    if ! [ $? -eq 0 ];then
	cError "${LINENO}:Cant create dir: " "$i3_dir" 
	cat $HOME/.cache/i3_script.log
	exit 2
    fi
fi
options="# i3 config. Auto generate\n"
options="${options}# Check ~/bin/i3_config\n"
options="${options}set \$mod $mod_button\n"
options="${options}font pango:$font $font_size\n"

#}}}
###############################
### Definitionsfor i3-gaps: ###{{{
###############################
options="${options}set \$binaries $binaries\n"
options="${options}set \$sup bindsym Mod4\n"

options="${options}set \$exe exec --no-startup-id\n"
options="${options}set \$exe_always exec_always --no-startup-id\n"

#icons
options="${options}set \$ico_bank     <span font=\"$font\">&#xf155;</span>\n"
options="${options}set \$ico_chat     <span font=\"$font\">&#xf27b;</span>\n"
options="${options}set \$ico_chrome   <span font=\"$font\">&#xf268;</span>\n"
options="${options}set \$ico_code     <span font=\"$font\">&#xf121;</span>\n"
options="${options}set \$ico_document <span font=\"$font\">&#xf0f6;</span>\n"
options="${options}set \$ico_pdf      <span font=\"$font\">&#xf1c1;</span>\n" 
options="${options}set \$ico_editor   <span font=\"$font\">&#xf044;</span>\n"
options="${options}set \$ico_email    <span font=\"$font\">&#xf003;</span>\n"
options="${options}set \$ico_firefox  <span font=\"$font\">&#xf269;</span>\n"
options="${options}set \$ico_folder   <span font=\"$font\">&#xf115;</span>\n"
options="${options}set \$ico_github   <span font=\"$font\">&#xf09b;</span>\n"
options="${options}set \$ico_hangouts <span font=\"$font\">&#xf10e;</span>\n"
options="${options}set \$ico_menu     <span font=\"$font\">&#xf0c9;</span>\n"
options="${options}set \$ico_monitor  <span font=\"$font\">&#xf26c;</span>\n"
options="${options}set \$ico_music    <span font=\"$font\">&#xf001;</span>\n"
options="${options}set \$ico_news     <span font=\"$font\">&#xf09e;</span>\n"
options="${options}set \$ico_package  <span font=\"$font\">&#xf1c6;</span>\n"
options="${options}set \$ico_play     <span font=\"$font\">&#xf01d;</span>\n"
options="${options}set \$ico_table    <span font=\"$font\">&#xf0ce;</span>\n"
options="${options}set \$ico_telegram <span font=\"$font\">&#xf1d9;</span>\n"
options="${options}set \$ico_terminal <span font=\"$font\">&#xf120;</span>\n"
options="${options}set \$ico_video    <span font=\"$font\">&#xf008;</span>\n"
options="${options}set \$ico_volume   <span font=\"$font\">&#xf028;</span>\n"
options="${options}set \$ico_whatsapp <span font=\"$font\">&#xf232;</span>\n"
options="${options}set \$ico_window   <span font=\"$font\">&#xf2d0;</span>\n"
options="${options}set \$ico_calibre   <span font=\"$font\">&#xf212;</span>\n"
# exec shortener 
# Use Mouse+$mod to drag floating windows to their wanted position.
options="${options}floating_modifier \$mod\n"
# Disable focus following the mouse (no).
options="${options}focus_follows_mouse yes\n"
options="${options}hide_edge_borders smart\n"
options="${options}default_border pixel 2\n"
# Focus the child container.
options="${options}workspace_auto_back_and_forth yes\n"
options="${options}set \$ws1  \"1 &#xf120;Term\"\n"
options="${options}set \$ws2  \"2: &#xf269;Firefox\"\n"
options="${options}set \$ws3  \"3: &#xf115;FM\"\n"
options="${options}set \$ws4  \"4: &#xf212;Calibre\"\n"
options="${options}set \$ws5  \"5: &#xf1c1;PDF\"\n"
options="${options}set \$ws6  \"6: &#xf2d0;Virt\"\n"
options="${options}set \$ws7  \"7\"\n"
options="${options}set \$ws8  \"8\"\n"
options="${options}set \$ws9  \"9\"\n"
options="${options}set \$ws10 \"10\"\n"
# Open specific applications in floating mode
# Disable title bars.
options="${options}for_window [class=\"^.*\"] border pixel 2\n"
options="${options}assign [class=\"konsole\"] \$ws1\n"
options="${options}assign [class=\"$browser\"] \$ws2\n"
options="${options}assign [class=\"calibre\"] \$ws4\n"
options="${options}assign [class=\"okular\"] \"5: &#xf1c1;PDF\"\n"
options="${options}assign [class=\"$fileManager\"] \$ws3\n"
options="${options}assign [instance=\"$fileManager\"] \$ws3\n"
options="${options}assign [instance=\"pamac-manager\"] \$ws3\n"
options="${options}assign [class=\"Virt-manager\"] \$ws6\n"

# Assign to floating by default.
options="${options}for_window [class=\"mpv\"] floating enable\n"
options="${options}for_window [class=\"gnome-calculator\"] floating enable\n"
# Let's try to get most pop-up floating.
options="${options}for_window [window_role=\"pop-up\"] floating enable\n"
options="${options}for_window [window_role=\"bubble\"] floating enable\n"
options="${options}for_window [window_role=\"task_dialog\"] floating enable\n"
options="${options}for_window [window_role=\"Preferences\"] floating enable\n"
options="${options}for_window [window_type=\"dialog\"] floating enable\n"
options="${options}for_window [window_type=\"menu\"] floating enable\n"
options="${options}for_window [class=\"GoldenDict\"] floating enable resize set 800 800\n"
options="${options}for_window [title=\"File Transfer*\"] floating enable\n"
options="${options}for_window [class=\"knotes\"] floating enable resize set 500 500\n"
options="${options}for_window [class=\"GParted\"] floating enable border normal set 800 800\n"
options="${options}for_window [title=\"Calculator\"] floating enable move position center\n"
#virtual machines
options="${options}for_window [class=\"Virt-manager\"] fullscreen enable\n" 

#}}}
#############################
### settings for i3-gaps: ###{{{
#############################
# Running with i3-gaps.
if [ "$use_gaps" = "true" ]; then
    options="${options}gaps inner $gaps_inner\n"
    options="${options}gaps outer $gaps_outer\n"


    # Additionally, you can issue commands with the following syntax. This is useful to bind keys to changing the gap size.
    # gaps inner|outer current|all set|plus|minus <px>
    # gaps inner all set 10
    # gaps outer all plus 5

    # Smart gaps (gaps used if only more than one container on the workspace)
    options="${options}smart_gaps on\n"

    # Smart borders (draw borders around container only if it is not the only container on this workspace) 
    # on|no_gaps (on=always activate and no_gaps=only activate if the gap size to the edge of the screen is 0)
    options="${options}smart_borders on\n"

    # Press $mod+Shift+g to enter the gap mode. Choose o or i for modifying outer/inner gaps. Press one of + / - (in-/decrement for current workspace) or 0 (remove gaps for current workspace). If you also press Shift with these keys, the change will be global for all workspaces.

    # Additionally, you can issue commands with the following syntax. This is useful to bind keys to changing the gap sie.
    # gaps inner|outer current|all set|plus|minus <px>
    # gaps inner all set 10
    # gaps outer all plus 5

    # Smart gaps (gaps used if only more than one container on the workspace)
    options="${options}smart_gaps on\n"

    # Smart borders (draw borders around container only if it is not the only container on this workspace) 
    # on|no_gaps (on=always activate and no_gaps=only activate if the gap size to the edge of the screen is 0)
    options="${options}smart_borders on\n"

    # Press $mod+Shift+g to enter the gap mode. Choose o or i for modifying outer/inner gaps. 
    # Press one of + / - (in-/derement for current workspace) or 0 (remove gaps for current workspace). If you also press Shift with these keys, the
    #change will be global for all workspaces.
    options="${options}set \$mode_gaps Gaps: (o) outer, (i) inner\n"
    options="${options}set \$mode_gaps_outer Outer Gaps: +|-|0 (local), Shift + +|-|0 (global)\n"
    options="${options}set \$mode_gaps_inner Inner Gaps: +|-|0 (local), Shift + +|-|0 (global)\n"
    options="${options}bindsym \$mod+Shift+g mode \"\$mode_gaps\"\n"
    options="${options}\n"

    options="${options}mode \"\$mode_gaps\" {\n"
    options="${options}        bindsym o      mode \"\$mode_gaps_outer\"\n"
    options="${options}        bindsym i      mode \"\$mode_gaps_inner\"\n"
    options="${options}        bindsym Return mode \"default\"\n"
    options="${options}        bindsym Escape mode \"default\"\n"
    options="${options}}\n"

    options="${options}mode \"\$mode_gaps_inner\" {\n"
    options="${options}        bindsym plus  gaps inner current plus 5\n"
    options="${options}        bindsym minus gaps inner current minus 5\n"
    options="${options}        bindsym 0    gaps inner current set 0\n"
    options="${options}\n"
    options="${options}        bindsym Shift+plus  gaps inner all plus 5\n"
    options="${options}        bindsym Shift+minus gaps inner all minus 5\n"
    options="${options}        bindsym Shift+0     gaps inner all set 0\n"
    options="${options}\n"
    options="${options}        bindsym Return mode \"default\"\n"
    options="${options}        bindsym Escape mode \"default\"\n"
    options="${options}}\n"

    options="${options}mode \"\$mode_gaps_outer\" {\n"
    options="${options}        bindsym plus  gaps outer current plus 5\n"
    options="${options}        bindsym minus gaps outer current minus 5\n"
    options="${options}        bindsym 0     gaps outer current set 0\n"
    options="${options}\n"
    options="${options}        bindsym Shift+plus  gaps outer all plus 5\n"
    options="${options}        bindsym Shift+minus gaps outer all minus 5\n"
    options="${options}        bindsym Shift+0     gaps outer all set 0\n"
    options="${options}\n"
    options="${options}        bindsym Return mode \"default\"\n"
    options="${options}        bindsym Escape mode \"default\"\n"
    options="${options}}\n"
    #I3 gaps use IF
fi
#}}}
################################################################################################
## keybindings                                                                                ##{{{
################################################################################################

#Terminal
options="${options}bindsym \$mod+Return exec $Terminal\n"
# Kill focused window.
options="${options}bindsym \$mod+Shift+q kill\n"
if [ "$osys" = "debian" ] || [ "$osys" = "ubuntu" ]; then
    #dmenu
    #options="${options}bindsym \$mod+d \$exe dmenu_run -b -l 15 -fn monofur\n"
    #options="${options}for_window [title=\"fzf-menu\"] floating enable move position center\n"
    options="${options}bindsym \$mod+d \$exe rofi -show drun\n"
elif [ "$osys" = "manjaro" ] || [ "$osys" = "$opensuse" ]; then
    #dmenu
    options="${options}bindsym \$mod+Ctrl+d \$exe dmenu_recency\n"
    options="${options}bindsym \$mod+d \$exe rofi -show drun\n"
    #options="${options}bindsym \$mod+d \$exe dmenu_run -b -l 15 -fn monofur\n"
    #options="${options}bindsym \$mod+d \$exe xfce4-terminal --title='fzf-menu' --command='i3-dmenu-desktop --dmenu=fzf'\n"
    #options="${options}for_window [title=\"fzf-menu\"] floating enable move position center\n"
fi
# Chance focus.
options="${options}bindsym \$mod+y focus left\n"
options="${options}bindsym \$mod+j focus down\n"
options="${options}bindsym \$mod+u focus up\n"
options="${options}bindsym \$mod+i focus right\n"
# alternatively, you can use the cursor keys:
options="${options}bindsym \$mod+Left focus left\n"
options="${options}bindsym \$mod+Down focus down\n"
options="${options}bindsym \$mod+Up focus up\n"
options="${options}bindsym \$mod+Right focus right\n"
# Move focused window.
options="${options}bindsym \$mod+Shift+y move left\n"
options="${options}bindsym \$mod+Shift+j move down\n"
options="${options}bindsym \$mod+Shift+u move up\n"
options="${options}bindsym \$mod+Shift+i move right\n"
# Move focused window arrows.
options="${options}bindsym \$mod+Shift+Left move left\n"
options="${options}bindsym \$mod+Shift+Down move down\n"
options="${options}bindsym \$mod+Shift+Up move up\n"
options="${options}bindsym \$mod+Shift+Right move right\n"
# split orientation
options="${options}bindsym \$mod+v split h;exec notify-send 'tile horizontally'\n"
options="${options}bindsym \$mod+h split v;exec notify-send 'tile vertically'\n"
options="${options}bindsym \$mod+x split toggle;exec notify-send 'tile toggle'\n"
# Split in horizontal orientation.
#options="${options}bindsym \$mod+Shift+h split h\n"
# Split in vertical orientation.
#options="${options}bindsym \$mod+Shift+v split v\n"
# Enter fullscreen mode for the focused container.
options="${options}bindsym \$mod+Shift+f fullscreen toggle\n"
# Change container layout (stacked, tabbed, toggle split).
options="${options}bindsym \$mod+Ctrl+s layout stacking\n"
options="${options}bindsym \$mod+Shift+t layout tabbed\n"
options="${options}bindsym \$mod+Shift+e layout toggle split\n"
# Toggle tiling / floating.
options="${options}bindsym \$mod+f floating toggle\n"
# Change focus between tiling / floating windows.
options="${options}bindsym \$mod+space focus mode_toggle\n"
# focus the parent container
options="${options}bindsym \$mod+a focus parent\n"
# Focus the parent container.
#bindsym $mod+a focus parent
# Switch to workspace.
options="${options}bindsym \$mod+1 workspace \$ws1\n"
options="${options}bindsym \$mod+2 workspace \$ws2\n"
options="${options}bindsym \$mod+3 workspace \$ws3\n"
options="${options}bindsym \$mod+4 workspace \$ws4\n"
options="${options}bindsym \$mod+5 workspace \$ws5\n"
options="${options}bindsym \$mod+6 workspace \$ws6\n"
options="${options}bindsym \$mod+7 workspace \$ws7\n"
options="${options}bindsym \$mod+8 workspace \$ws8\n"
options="${options}bindsym \$mod+9 workspace \$ws9\n"
#options="${options}bindsym \$mod+0 workspace \$ws10\n"
options="${options}bindsym \$mod+b workspace back_and_forth\n"
options="${options}bindsym \$mod+Tab workspace next\n"
# Move focused container to workspace.
options="${options}bindsym \$mod+Ctrl+1 move container to workspace \$ws1\n"
options="${options}bindsym \$mod+Ctrl+2 move container to workspace \$ws2\n"
options="${options}bindsym \$mod+Ctrl+3 move container to workspace \$ws3\n"
options="${options}bindsym \$mod+Ctrl+4 move container to workspace \$ws4\n"
options="${options}bindsym \$mod+Ctrl+5 move container to workspace \$ws5\n"
options="${options}bindsym \$mod+Ctrl+6 move container to workspace \$ws6\n"
options="${options}bindsym \$mod+Ctrl+7 move container to workspace \$ws7\n"
options="${options}bindsym \$mod+Ctrl+8 move container to workspace \$ws8\n"
options="${options}bindsym \$mod+Ctrl+9 move container to workspace \$ws9\n"
options="${options}bindsym \$mod+Ctrl+0 move container to workspace \$ws10\n"
options="${options}bindsym \$mod+Ctrl+b move workspace back_and_forth\n"
# move the currently focused window to the scratchpad
options="${options}bindsym \$mod+Shift+minus move scratchpad\n"
# Show the first scratchpad window
options="${options}bindsym \$mod+minus scratchpad show\n"
# Move to workspace with focused container
options="${options}bindsym \$mod+Shift+1 move container to workspace \$ws1; workspace \$ws1\n"
options="${options}bindsym \$mod+Shift+2 move container to workspace \$ws2; workspace \$ws2\n"
options="${options}bindsym \$mod+Shift+3 move container to workspace \$ws3; workspace \$ws3\n"
options="${options}bindsym \$mod+Shift+4 move container to workspace \$ws4; workspace \$ws4\n"
options="${options}bindsym \$mod+Shift+5 move container to workspace \$ws5; workspace \$ws5\n"
options="${options}bindsym \$mod+Shift+6 move container to workspace \$ws6; workspace \$ws6\n"
options="${options}bindsym \$mod+Shift+7 move container to workspace \$ws7; workspace \$ws7\n"
options="${options}bindsym \$mod+Shift+8 move container to workspace \$ws8; workspace \$ws8\n"
options="${options}bindsym \$mod+Shift+b workspace back_and_forth\n"
#resize set [width] <width> [px | ppt] [height] <height> [px | ppt]
# Jump to the latest "urgent" window.
options="${options}bindsym \$mod+Ctrl+u [urgent=latest] focus\n"
# Reload the configuration file.
options="${options}bindsym \$mod+Shift+d reload\n"
# Restart i3 inplace (preserves your layout/session, can be used to upgrade i3).
options="${options}bindsym \$mod+Shift+r restart\n"
# exit i3 labed (logs you out of your X session) 
case  $osys in

    "debian" | "ubuntu")
    options="${options}bindsym \$mod+Ctrl+l \$exe i3lock-fancy -p\n"
    options="${options}bindsym \$mod+e exec \"i3-nagbar -t warning -m 'You pressed the exit shortcut. Do you really want to exit i3? This will end your X session.' -B 'Yes, exit i3' 'i3-msg exit'\"\n"

    #exit, logout, shutdown, restart etc
    options="${options}bindsym \$mod+Escape mode \"Warning. You call system control. Choose: Esc or Enter to Cancel, ne[t] refresh, [e]xit, [s]uspend, [r]eboot, Shut[d]own\"\n"
    options="${options}mode \"Warning. You call system control. Choose: Esc or Enter to Cancel, ne[t] refresh, [e]xit, [s]uspend, [r]eboot, Shut[d]own\" {\n"
    options="${options}	bindsym t \$exe systemctl restart NetworkManager, mode default\n"
    options="${options}	bindsym e \$exe i3-msg exit , mode default\n"
    options="${options}	bindsym s \$exe systemctl suspend, mode default\n"
    options="${options}	bindsym r \$exe systemctl reboot , mode default\n"
    options="${options}	bindsym d \$exe systemctl poweroff, mode default\n"
    options="${options}	bindsym Return mode default\n"
    options="${options}	bindsym Escape mode default\n"
    options="${options}}\n"
    # Resize window (you can also use the mouse for that).
    options="${options}bindsym \$mod+Ctrl+r mode resize\n"
    options="${options}mode resize {\n"
    options="${options}    bindsym h resize shrink width 10 px or 10 ppt\n"
    options="${options}    bindsym j resize grow height 10 px or 10 ppt\n"
    options="${options}    bindsym k resize shrink height 10 px or 10 ppt\n"
    ##options="${options}    bindsym l resize grow width 10 px or 10 ppt\n"
    #with arrow
    options="${options}    bindsym Left resize shrink width 10 px or 10 ppt\n"
    options="${options}    bindsym Down resize grow height 10 px or 10 ppt\n"
    options="${options}    bindsym Up resize shrink height 10 px or 10 ppt\n"
    options="${options}    bindsym Right resize grow width 10 px or 10 ppt\n"
    # Back to normal: Enter or Escape.
    options="${options}    bindsym Return mode default\n"
    options="${options}    bindsym Escape mode default\n"
    options="${options}    bindsym \$mod+r mode default\n"
    options="${options}}\n"
    ;;
    
    "manjaro" | $opensuse)
    options="${options}bindsym \$mod+Ctrl+l \$exe blurlock -e -f -k\n"
    # exit i3 (logs you out of your X session)
    #options="${options}bindsym \$mod+Shift+e exec \"i3-nagbar -t warning -m 'You pressed the exit shortcut. Do you really want to exit i3? This will end your X session.' -b 'Yes, exit i3' 'i3-msg exit'\"\n"

    # Set shut down, restart and locking features
    options="${options}bindsym \$mod+Escape mode \"\$mode_system\"\n"
    options="${options}set \$mode_system (l)ock, (e)xit, switch_(u)ser, (s)uspend, (h)ibernate, (r)eboot, (Shift+s)hutdown\n"
    options="${options}mode \"\$mode_system\" {\n"
    options="${options}    bindsym l \$exe i3exit lock, mode \"default\"\n"
    options="${options}    bindsym e \$exe i3exit logout, mode \"default\"\n"
    options="${options}    bindsym u \$exe i3exit switch_user, mode \"default\"\n"
    options="${options}    bindsym s \$exe i3exit suspend, mode \"default\"\n"
    options="${options}    bindsym h \$exe i3exit hibernate, mode \"default\"\n"
    options="${options}    bindsym r \$exe i3exit reboot, mode \"default\"\n"
    options="${options}    bindsym Shift+s \$exe i3exit shutdown, mode \"default\"\n"

    # exit system mode: "Enter" or "Escape"
    options="${options}    bindsym Return mode \"default\"\n"
    options="${options}    bindsym Escape mode \"default\"\n"
    options="${options}}\n"
    ;;
esac

# Keybidings Start Applications 
#bindsym Ctrl+1 exec xfce4-appfinder
case $osys in

    "ubuntu" | "debian") 
    options="${options}bindsym Ctrl+1 exec $browser\n"
    ;;

    "manjaro") 
    options="${options}bindsym Ctrl+1 exec $browser\n"
    options="${options}bindsym Ctrl+F1 exec xdg-open /usr/share/doc/manjaro/i3_help.pdf\n"
    # start program launcher
    # launch categorized menu
    options="${options}bindsym \$mod+z \$exe morc_menu\n"
    options="${options}bindsym \$mod+Shift+m exec $Terminal -e 'bmenu'\n"
    ;;

    "$opensuse") 
    options="${options}bindsym Ctrl+1 exec $browser\n"
    options="${options}bindsym Ctrl+F1 exec xdg-open /usr/share/doc/manjaro/i3_help.pdf\n"
    # start program launcher
    # launch categorized menu
    options="${options}bindsym \$mod+z \$exe morc_menu\n"
    options="${options}bindsym \$mod+Shift+m exec $Terminal -e 'bmenu'\n"
    ;;

esac

options="${options}bindsym Ctrl+0 exec $Terminal -e vim $i3_cfg_dir/config\n"
options="${options}bindsym Ctrl+3 exec $fileManager\n"
options="${options}bindsym Ctrl+2 exec $Terminal -e vifm\n"
options="${options}bindsym Print --release \$exe $binaries/i3-scrot\n"
options="${options}bindsym \$mod+Shift+Print --release \$exe $binaries/i3-scrot -w\n"
options="${options}bindsym \$mod+Print --release \$exe $binaries/i3-scrot -s\n"
options="${options}bindsym \$mod+Ctrl+x --release \$exe xkill\n"


#}}}
################################################################################################
##  Color appearance                                                                          ##{{{
################################################################################################


# -----------------------------------------------------------------
		    # class                 border      backgr. text    indicator child_border
options="${options}client.focused          $green    $black  $white  $purple   $green\n"
options="${options}client.focused_inactive $dark_gray2       $dark_gray2   $white  $yellow   $dark_gray2\n"
options="${options}client.unfocused        $dark_gray2       $dark_gray2   $white  $purple   $dark_gray2\n"
options="${options}client.urgent           $red      $dark_gray2   $white  $red      $red\n"
options="${options}client.background       $dark_gray2\n"

#}}}
################################################################################################
## i3bar config                                                                               ##{{{
################################################################################################

if [ $num_monitors == 2 ]; then
    # Place workspace.
    #options="${options}workspace 1 output $monitor1\n"
    #options="${options}workspace 2 output $monitor2\n"
    options="${options}bar {\n"
    options="${options}    id bar-1 \n"
    options="${options}    position top\n"
    options="${options}    output primary\n"
    options="${options}    tray_output primary\n"
    options="${options}    tray_padding 2\n"
    options="${options}    separator_symbol \" \"\n"
    options="${options}    mode dock \n"
    options="${options}    font pango: $font $font_size\n"
    options="${options}    status_command $status_command\n"
    options="${options}    colors {\n"
    options="${options}    background $dark_gray\n"
    #options="${options}    statusline $black2\n"
    #options="${options}        separator  $purple\n"
			       #                border     backgr      text
    options="${options}    focused_workspace    $blue    $green    $dark_gray2\n"
    options="${options}    active_workspace	$dark_gray2      $blue     $white\n"
    options="${options}    inactive_workspace   $dark_gray2      $gray     $dark_gray2\n"
    options="${options}    urgent_workspace	$dark_gray2      $yellow   $dark_gray2\n"
    options="${options}    }\n"
    options="${options}}\n"
    options="${options}bar {\n"
    options="${options}    id bar-2 \n"
    options="${options}    position top\n"
    options="${options}    output nonprimary\n"
    options="${options}    tray_output none\n"
    options="${options}    tray_padding 2\n"
    options="${options}    separator_symbol \" \"\n"
    options="${options}    mode dock \n"
    options="${options}    font pango: $font $font_size\n"
    options="${options}    status_command $status_command2\n"
    options="${options}    colors {\n"
    options="${options}    background $dark_gray\n"
    #options="${options}    statusline $black2\n"
    #options="${options}        separator  $purple\n"
			       #                border     backgr      text
    options="${options}    focused_workspace    $blue    $green    $dark_gray2\n"
    options="${options}    active_workspace	$dark_gray2      $blue     $white\n"
    options="${options}    inactive_workspace   $dark_gray2      $gray     $dark_gray2\n"
    options="${options}    urgent_workspace	$dark_gray2      $yellow   $dark_gray2\n"
    options="${options}    }\n"
    options="${options}}\n"
elif [ $num_monitors == 1 ]; then
    options="${options}bar {\n"
    options="${options}    id bar-1 \n"
    options="${options}    position top\n"
    options="${options}    output primary\n"
    options="${options}    tray_output primary\n"
    options="${options}    tray_padding 2\n"
    options="${options}    separator_symbol \" \"\n"
    options="${options}    mode dock \n"
    options="${options}    font pango: $font $font_size\n"
    options="${options}    status_command $status_command\n"
    options="${options}    colors {\n"
    options="${options}    background $dark_gray\n"

    #options="${options}    separator  $purple\n"
			   #                    border     backgr      text
    options="${options}    focused_workspace    $blue    $green    $dark_gray2\n"
    options="${options}    active_workspace	$dark_gray2      $blue     $white\n"
    options="${options}    inactive_workspace   $dark_gray2      $gray     $dark_gray2\n"
    options="${options}    urgent_workspace	$dark_gray2      $yellow   $dark_gray2\n"
    options="${options}    }\n"
    options="${options}}\n"
fi
 
#}}}
################################################################################################
## caps lock/num lock status                                                                  ##{{{
################################################################################################
# 
options="${options}bindsym --release Caps_Lock \$exe pkill -SIGRTMIN+11 i3blocks\n"
options="${options}bindsym --release Num_Lock  \$exe pkill -SIGRTMIN+11 i3blocks\n"
#}}}
################################################################################################
## sound-section                                                                              ##{{{
################################################################################################
if [ "$osys" = "debian" ] || [ "$osys" = "ubuntu" ]; then
    # volume control and i3blocks volume status --------------------------------
    options="${options}set \$vol_signal pkill -SIGRTMIN+10 i3blocks\n"
    options="${options}bindsym XF86AudioRaiseVolume \$exe pactl set-sink-volume \$pa_sink +5%%  && \$vol_signal\n"
    options="${options}bindsym XF86AudioLowerVolume \$exe pactl set-sink-volume \$pa_sink -5%%  && \$vol_signal\n"
    options="${options}bindsym XF86AudioMute        \$exe pactl set-sink-mute \$pa_sink toggle && \$vol_signal\n"
    options="${options}bindsym XF86HomePage         \$exe pavucontrol\n"


################################################################################################
    ## sound-section - DO NOT EDIT if you wish to automatically upgrade Alsa -> Pulseaudio later! ##{{{
################################################################################################
elif [ "$osys" = "manjaro" ] || [ "$osys" = "$opensuse" ]; then
    options="${options}\$exe volumeicon\n"
    if amixer -h &> /dev/null; then
        options="${options}bindsym Ctrl+F2 exec $Terminal -e alsamixer\n"
        #options="${options}bindsym \$mod+Ctrl+m exec $Terminal -e \'alsamixer\'\n"
    elif pactl --version &> /dev/null; then
        options="${options}bindsym Ctrl+F2 exec pavucontrol\n"
        #options="${options}bindsym \$mod+Ctrl+m exec pavucontrol\n"
        options="${options}\$exe pulseaudio\n"
#        options="${options}\$exe pa-applet\n"
        #bindsym $mod+Ctrl+m exec pavucontrol
    fi
fi

    #}}}
################################################################################################}}}
## Session startup                                                                            ##{{{
################################################################################################
#OFF bell on preference for X
options="${options}\$exe $i3_cfg_dir/autostart/i3config\n"
options="${options}\$exe $i3_cfg_dir/autostart/wallpapers\n"
#options="${options}\$exe picom --config ~/.config/picom.conf\n"
options="${options}\$exe_always xset b off\n"
#Networkmanager wicd and NM do not work together
options="${options}\$exe nm-applet --indicator\n"
#Keyboard settings
options="${options}\$exe numlockx on\n"
#change config for my preferences
#options="${options}\$exe $binaries/rm_linedup ~/.bash_history\n"
#Apps autoexec on start
options="${options}bindsym Ctrl+r \$exe \$HOME/bin/wacom-rotate-toggle\n"
options="${options}bindsym Ctrl+m \$exe \$HOME/bin/wacom-monitor-toggle\n"
# exec_always --no-startup-id sbxkb
#$exe start_conky_green

if [ "$osys" = "debian" ] || [ "$osys" = "ubuntu" ]; then
    options="${options}\$exe xfce4-power-manager\n"
    options="${options}\$exe blueman-applet\n"
    options="${options}\$exe /usr/lib/policykit-1-gnome/polkit-gnome-authentication-agent-1\n"
    options="${options}\$exe xautolock -time 10 -locker \"i3lock-fancy -p -g\"\n"
    options="${options}\$exe diodon\n"
elif [ "$osys" = "manjaro" ] ;then
    options="${options}\$exe xfce4-power-manager\n"
    options="${options}\$exe /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1\n"
        options="${options}\$exe clipit\n"
    options="${options}\$exe xautolock -time 10 -locker blurlock -e -f -k\n"
    options="${options}\$exe pamac-tray\n"
    options="${options}\$exe ff-theme-util\n"
    options="${options}\$exe_always xrdb -load ~/.Xresources\n"
    if pacman -Qi blueman &> /dev/null; then
	options="${options}\$exe blueman-applet\n"
    fi
    if pacman -Qi goldendict &> /dev/null; then
	options="${options}\$exe goldendict\n"
    fi
    if [ -e ~/.config/conky/ ];then
	options="${options}\$exe \$HOME/.config/conky/start_conky\n"
    else
	options="${options}\$exe start_conky\n"
    fi
elif [ "$osys" = "$opensuse" ]; then
    options="${options}\$exe xautolock -time 10 -locker blurlock\n"
    options="${options}\$exe_always xrdb -load ~/.Xresources\n"
    options="${options}\$exe /usr/libexec/polkit-kde-authentication-agent-1\n"
    if which qlipper &> /dev/null;then
	options="${options}\$exe qlipper\n"
    fi 
    if which blueman-applet &> /dev/null; then
	options="${options}\$exe blueman-applet\n"
    fi
    if which goldendict  &> /dev/null; then
	options="${options}\$exe goldendict\n"
    fi
    if [ -e ~/.config/conky/ ] && which conky &> /dev/null; then
	options="${options}\$exe \$HOME/.config/conky/start_conky\n"
    else
	options="${options}\$exe start_conky_maia\n"
    fi
fi

#}}}
#### config ends in this line
if ! i3 -v &> /dev/null; then
    cInfo "i3wm isn't installed" "Skipped"
else
    printf "$options%s" > "$i3_cfg"
    if [ $? -eq 0 ];then
	cInfo "Created on:" "$i3_cfg" 
    else
	cError "${LINENO}:Could not write config file"
	exit 1
    fi
fi

if [ -f "$i3_cfg" ]; then
    cOk "i3 config file"
else
    cError "${LINENO}:Config file not found"
fi
